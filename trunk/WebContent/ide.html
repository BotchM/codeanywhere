<html>
<head>
<title>codeAnywhere beta</title>
<link rel="stylesheet" type="text/css" href="stylesheets/openfiledialog.css"/>
<link rel="stylesheet" type="text/css" href="stylesheets/dialog.css"/>
<link rel="stylesheet" type="text/css" href="stylesheets/window.css"/>
<link rel="stylesheet" type="text/css" href="stylesheets/common.css"/>

<script language="javascript" type="text/javascript" src="scripts/dojo.js">
</script>
<script language="javascript" type="text/javascript" src="scripts/ajax.js">
</script>
<script language="javascript" type="text/javascript" src="scripts/component.js">
</script>
<script language="javascript" type="text/javascript" src="scripts/navigate.js">
</script>
<script language="javascript" type="text/javascript" src="scripts/file.js">
</script>
<script type="text/javascript" type="text/javascript" src="scripts/toolbar.js">
</script>

<script language="javascript" type="text/javascript">
	dojo.require("dojo.io.*");
	dojo.require("dojo.widget.SplitContainer");
	dojo.require("dojo.widget.ContentPane");
	dojo.require("dojo.widget.TabContainer");
	dojo.require("dojo.widget.LinkPane");
	dojo.require("dojo.widget.Toolbar");
	dojo.require("dojo.widget.Menu2");
	dojo.require("dojo.widget.Editor");
	dojo.require("dojo.lang.*");
	dojo.require("dojo.widget.Tree");
	dojo.require("dojo.widget.TreeRPCController");
	dojo.require("dojo.widget.TreeSelector");
	dojo.require("dojo.widget.TreeNode");
	dojo.require("dojo.widget.TreeContextMenu");
	dojo.require("dojo.event.*");
	dojo.require("dojo.widget.Dialog");
	
	/* for dialogs */
	dojo.require("dojo.widget.*");
	dojo.require("dojo.widget.TaskBar");
	dojo.require("dojo.widget.LayoutContainer");
	dojo.require("dojo.widget.FloatingPane");
	dojo.require("dojo.widget.ResizeHandle");
	/* end */

	dojo.hostenv.writeIncludes();
</script>

<!-- I do not want to put these scripts here.
But I don't know what to do. -->

<script>
	function DisplayTreeContent(){
	    this.update = function(message) {
	        var clickedTreeNode = message.node;
			
			var docPane = dojo.widget.byId("docPane");
			var file = clickedTreeNode.object;
			if (!file){
				docPane.setContent("Try clicking doc0, doc1 or doc2 instead...");
			}else{
				docPane.setUrl(file);
			}
	    };
	}

	var displayer = new DisplayTreeContent();

	var nodeSelectionTopic = dojo.event.topic.getTopic("nodeSelected");
	nodeSelectionTopic.subscribe(displayer, "update");

	// display custom loadError or use built in
	// works best from live server instead of filesystem
	function contentLoadError(e){
		var chkbox = dojo.byId("defaultLoadError");
		if(chkbox && chkbox.checked){
			// use built in
			return;
		}
		e.preventDefault(); // or e.returnValue = false;
		var pane = dojo.widget.byId('docPane')
		pane.setContent("Custom Loaderror goes here<br/><img src='images/x.gif' style='float:left;'/> file not found");
		dialogHandler();// turn off loading dialog
	}

	// display custom Error(Content java/javascript eval error) or use built in method
	function contentExecError(e){
		var chkbox = dojo.byId("defaultEvalError");
		if(chkbox && chkbox.checked){
			// use built in
			return;
		}
		e.preventDefault();
		alert('Oops! error occured:'+arguments[0]);
	}

	// display loading dialog or use built in "Loading..." message
	function contentDownloadStart(e){
		var chkbox = dojo.byId("defaultLoadInfo");
		if(chkbox && chkbox.checked){
			// use built in
			return;
		}
		dialogHandler(e, true);
	}

	// show / hide loading dialog
	function dialogHandler(e, show){
		var dialog = dojo.widget.byId("statusDialog");
		if(show){
			e.preventDefault();
			dialog.show();
			return;
		}
		dialog.hide();
	}
</script>

</head>

<body>
<div id="window" class="border window">
	<div id="titlebar" class="noborder titlebar"><div class="titlebartext">codeAnyehere - Untitled</div><div class="button close"></div></div>
	<div id="menubar" class="noborder menubar" src="components/menubar.xml">
	</div>
	
	<div id="toolbar" class="noborder toolbar" src="components/toolbar.xml">
	</div>
	
	<div dojoType="SplitContainer"
		orientation="horizontal"
		sizerWidth="5"
		activeSizing="0"
		class="innercontainer noborder">
		
		<div id="navigator" class="noborder navigator" src="components/navigator.xml" dojoType="ContentPane" sizeShare="20">
		</div>
		
		<div dojoType="SplitContainer"
			orientation="vertical"
			sizerWidth="5"
			activeSizing="0"
			sizeShare="60"
			class="innercontainer noborder">
			
			<div id="codearea" class="noborder codearea" src="components/codearea.xml" dojoType="ContentPane" sizeShare="50">		
			</div>
			<div id="console" class="border console" src="components/console.xml" dojoType="ContentPane" sizeShare="50">
			</div>
		</div>
		
	</div>
	
</div>
</body>
<script language="javascript" type="text/javascript">
	initComponentById("menubar");
	initComponentById("toolbar");
	initComponentById("navigator");
	//initComponentById("openfile");
	
	var ca = new CodeArea("codearea");
	ca.init();
</script>
</html>
